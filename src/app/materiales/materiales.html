<!-- Vista de tabla de materiales -->
<!-- FOUND IT Software - Sistema de Gestión de Materiales -->

<div class="page-container">
  <!-- Header Section with FOUND IT Branding -->
  <div class="page-header">
    <div class="header-content">
      <div class="brand-section">
        <div class="logo">
          <span class="logo-f">F</span>
          <span class="logo-ound">OUND</span>
          <span class="logo-it">IT</span>
          <!-- <span class="logo-software">Software</span> -->
        </div>
        <div class="header-text">
          <!-- <h1>Gestión de Materiales</h1> -->
        <!--   <p>
            Sistema de control y seguimiento de inventario de materiales.
          </p> -->
        </div>
      </div>
      <div class="header-actions">
        <button class="btn-primary" (click)="consultarTodosMateriales()">
          <i class="icon">🔄</i>
          Actualizar
        </button>
        <button class="btn-secondary" (click)="navigateToCreate()">
          <i class="icon">➕</i>
          Nuevo Material
        </button>
      </div>
    </div>
  </div>

  <!-- Materials Table Section -->
  <div class="materials-section">
    <div class="section-header">
      <h2>Inventario de Materiales</h2>
      <div class="items-info">
        <span *ngIf="materiales">
          <i class="icon">📊</i>
          Total: {{ materiales.length }} materiales
        </span>
      </div>
    </div>

    <!-- Materials Table -->
    <div class="table-container" *ngIf="materiales && materiales.length > 0">
      <table class="materials-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Descripción</th>
            <th>Cantidad</th>
            <th>Ubicación</th>
            <th>Movimientos</th>
            <th>Historial</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let material of materiales; let i = index" class="material-row">
            <td class="material-name">
              <div class="name-cell">
                <i class="icon">📦</i>
                {{ material.nombre }}
              </div>
            </td>
            <td class="material-description">
              {{ material.descripcion }}
            </td>
            <td class="material-quantity">
              <span class="quantity-badge" [class.low-stock]="material.cantidad < 10">
                {{ material.cantidad }}
              </span>
            </td>
            <td class="material-location">
              <div class="location-cell">
                <i class="icon">📍</i>
                {{ material.ubicacion }}
              </div>
            </td>
            <td class="material-movements">
              <span *ngIf="material.Timestamp" class="timestamp">
                {{ material.Timestamp | date:'yyyy-MM-dd HH:mm:ss' }}
              </span>
            </td>
            <td class="material-history">
              <div class="history-cell">
                <span *ngFor="let movimiento of material.movimientos; let last = last">
                  <span 
                    class="movement-item"
                    [title]="movimiento.timestamp ? (movimiento.timestamp | date:'yyyy-MM-dd HH:mm:ss') : ''">
                    {{ movimiento.descripcion || movimiento }}
                  </span>
                  <span *ngIf="!last" class="separator">, </span>
                </span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!materiales || materiales.length === 0">
      <div class="empty-content">
        <i class="empty-icon">📋</i>
        <h3>No hay materiales registrados</h3>
        <p>No se encontraron materiales en el sistema</p>
        <button class="btn-primary" (click)="consultarTodosMateriales()">
          <i class="icon">🔄</i>
          Cargar Materiales
        </button>
      </div>
    </div>
  </div>
</div>

